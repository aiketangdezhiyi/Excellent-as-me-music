(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5b0cacc"],{"00a5":function(e,t,n){"use strict";n("6aa8")},"03bf":function(e,t,n){"use strict";n("58ee")},"03fb":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));n("4e82"),n("4de4"),n("caad"),n("2532"),n("b0c0"),n("d3b7");function r(e,t){var n=e.filter((function(e){return!1===t.includes(e)})),r=t.filter((function(t){return!1===e.includes(t)}));return{lastExistButNowNoExist:n,lastNoExistButNowExist:r}}function a(e,t,n){var r=new FormData;return r.append(t,e[0],e[0].name),fetch(n,{method:"POST",body:r}).then((function(e){return e.json()}))}},"04d1":function(e,t,n){var r=n("342f"),a=r.match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},"0858":function(e,t,n){"use strict";n("4f5f")},"0874":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"mask",staticClass:"mask flex-center",on:{click:e.handleMaskClick}},[n("div",{staticClass:"show-favorite-container"},[n("div",{staticClass:"header"},[e._v(e._s(e.title))]),n("div",{staticClass:"main"},[e._t("default")],2),n("div",{staticClass:"footer"},[e._t("footer")],2)])])},a=[],i={props:{title:{type:String,default:"添加到收藏夹"}},methods:{handleMaskClick:function(e){this.$refs.mask===e.target&&this.$emit("maskClick")}}},s=i,o=(n("9783"),n("2877")),c=Object(o["a"])(s,r,a,!1,null,"1bd67ced",null);t["a"]=c.exports},"0a0c":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogComp",{attrs:{title:"添加到收藏夹"},on:{maskClick:function(t){return e.$emit("maskClick")}},nativeOn:{click:function(t){return e.handleDialogClick.apply(null,arguments)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{staticClass:"confirm-btn",attrs:{loading:e.confirmLoading},on:{click:e.confirm}},[e._v("确定")])]},proxy:!0}])},[[e._l(e.favoriteItem,(function(t){return n("FavoriteItem",{key:t.id,attrs:{select:e.activeIndex.includes(t.id),item:t},nativeOn:{click:function(n){return e.handleClick(t,t.id)}}})})),n("div",{ref:"addGroup",staticClass:"add-group",class:{hide:e.showFormInput},on:{click:function(t){e.showFormInput=!0}}},[n("div",{ref:"addGroupBtn",staticClass:"add-btn"},[e._v("新建收藏夹")])]),n("form",{ref:"inputGroup",staticClass:"input-group",class:{show:e.showFormInput}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newFavorite,expression:"newFavorite"}],ref:"input",attrs:{type:"text",maxlength:"20",placeholder:"最多可输入20个字"},domProps:{value:e.newFavorite},on:{input:function(t){t.target.composing||(e.newFavorite=t.target.value)}}}),n("button",{ref:"submitBtn",staticClass:"submit",on:{click:function(t){return t.preventDefault(),e.addNewFavorite.apply(null,arguments)}}},[e._v(" 新建 ")])])]],2)},a=[],i=n("1da1"),s=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"favorite-item-wrapper"},[n("span",{class:{selected:e.select}}),n("p",[e._v(e._s(e.item.name))])])}),o=[],c={props:{item:Object,select:Boolean}},u=c,l=(n("2a6a"),n("2877")),d=Object(l["a"])(u,s,o,!1,null,"39cc24b2",null),f=d.exports,p=n("0874"),h={components:{FavoriteItem:f,DialogComp:p["a"]},props:{confirmLoading:Boolean,favoriteItem:{type:Array,default:function(){return[]}},activeIndex:Array},data:function(){return{showFormInput:!1,newFavorite:""}},methods:{confirm:function(){this.$emit("confirm")},handleClick:function(e,t){this.$emit("select",e,t)},addNewFavorite:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(""==e.newFavorite||e.newFavorite.length>=20)){t.next=3;break}return e.$message({message:"收藏夹的名字好像不规范",duration:1500,type:"warning"}),t.abrupt("return");case 3:return t.next=5,e.$api.addFavorite({name:e.newFavorite});case 5:n=t.sent,e.$emit("addFavorite",n.data,n.data.id),e.showFormInput=!1,e.newFavorite="";case 9:case"end":return t.stop()}}),t)})))()},handleDialogClick:function(e){e.target!==this.$refs.addGroup&&e.target!==this.$refs.addGroupBtn?e.target!==this.$refs.submitBtn&&e.target!==this.$refs.inputGroup&&e.target!==this.$refs.input&&(this.showFormInput=!1):this.showFormInput=!0}}},m=h,g=(n("9bd2"),Object(l["a"])(m,r,a,!1,null,"065b06be",null));t["a"]=g.exports},2532:function(e,t,n){"use strict";var r=n("23e7"),a=n("5a34"),i=n("1d80"),s=n("577e"),o=n("ab13");r({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~s(i(this)).indexOf(s(a(e)),arguments.length>1?arguments[1]:void 0)}})},"26da":function(e,t,n){},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6b75");function a(e){if(Array.isArray(e))return Object(r["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=n("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return a(e)||i(e)||Object(s["a"])(e)||o()}},"2a6a":function(e,t,n){"use strict";n("26da")},"3ca8":function(e,t,n){"use strict";n("4fcd")},4118:function(e,t,n){},"417c":function(e,t,n){},"43a0":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-pagination",{staticStyle:{"font-weight":"normal","text-align":"center","margin-top":"15px"},attrs:{background:"","current-page":e.page,"page-size":e.size,layout:"total,  prev, pager, next, jumper",total:e.count,"hide-on-single-page":!0},on:{"current-change":e.handleCurrentChange}})},a=[],i=(n("a9e3"),{props:{handleCurrentChange:Function,page:Number,size:Number,count:Number}}),s=i,o=(n("03bf"),n("2877")),c=Object(o["a"])(s,r,a,!1,null,"34595a20",null);t["a"]=c.exports},"4e82":function(e,t,n){"use strict";var r=n("23e7"),a=n("1c0b"),i=n("7b0b"),s=n("50c4"),o=n("577e"),c=n("d039"),u=n("addb"),l=n("a640"),d=n("04d1"),f=n("d998"),p=n("2d00"),h=n("512ce"),m=[],g=m.sort,v=c((function(){m.sort(void 0)})),b=c((function(){m.sort(null)})),y=l("sort"),w=!c((function(){if(p)return p<70;if(!(d&&d>3)){if(f)return!0;if(h)return h<603;var e,t,n,r,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)m.push({k:t+r,v:n})}for(m.sort((function(e,t){return t.v-e.v})),r=0;r<m.length;r++)t=m[r].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}})),x=v||!b||!y||!w,C=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:o(t)>o(n)?1:-1}};r({target:"Array",proto:!0,forced:x},{sort:function(e){void 0!==e&&a(e);var t=i(this);if(w)return void 0===e?g.call(t):g.call(t,e);var n,r,o=[],c=s(t.length);for(r=0;r<c;r++)r in t&&o.push(t[r]);o=u(o,C(e)),n=o.length,r=0;while(r<n)t[r]=o[r++];while(r<c)delete t[r++];return t}})},"4f5f":function(e,t,n){},"4fcd":function(e,t,n){},"512ce":function(e,t,n){var r=n("342f"),a=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},"58ee":function(e,t,n){},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5bf8":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"sex-wrapper iconfont flex-center",class:{"icon-icmale":e.sex,"icon-icfemale":!e.sex}})},a=[],i={props:{sex:Boolean}},s=i,o=(n("8476"),n("2877")),c=Object(o["a"])(s,r,a,!1,null,"a88d87cc",null);t["a"]=c.exports},"6aa8":function(e,t,n){},"741a":function(e,t,n){},"79ce":function(e,t,n){"use strict";n.r(t);var r,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-container"},[n("div",{staticClass:"header-search"},[n("div",{staticClass:"search-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyWord,expression:"searchKeyWord"}],attrs:{type:"text",placeholder:"请输入搜索的音乐"},domProps:{value:e.searchKeyWord},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeSearchKeyword.apply(null,arguments)},input:function(t){t.target.composing||(e.searchKeyWord=t.target.value)}}}),n("button",{staticClass:"search-button",on:{click:e.changeSearchKeyword}})])]),n("div",{staticClass:"search-content"},[n("SearchHeader",{attrs:{title:"搜索结果"},on:{playall:e.playAll,playselect:e.playSelect}}),n("SearchList",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{selectSongs:e.selectSongs,searchSongs:e.searchSongs},on:{select:e.select}})],1),n("PagerComp",{staticStyle:{"margin-bottom":"15px"},attrs:{handleCurrentChange:e.handleCurrentChange,page:e.pageConfig.page,size:e.pageConfig.size,count:e.count}})],1)},i=[],s=n("1da1"),o=(n("a434"),n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-header-container p-r"},[e.title?n("span",{staticClass:"title active"},[e._v(e._s(e.title))]):e._e(),n("div",{staticClass:"user-btn-wrapper p-a"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("playall")}}},[n("i",{staticClass:"el-icon-video-play"}),e._v(" 播放所有歌曲")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("playselect")}}},[n("i",{staticClass:"el-icon-video-play"}),e._v("播放选中歌曲")])],1)])}),c=[],u={props:{title:String,list:{type:Array,default:function(){return[]}}}},l=u,d=(n("00a5"),n("2877")),f=Object(d["a"])(l,o,c,!1,null,"35001f1c",null),p=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"search-list-container"},[e._m(0),e._l(e.searchSongs,(function(t){return n("li",{key:t.id,staticClass:"search-item song p-r"},[n("div",{staticClass:"text-ellipsis song-name"},[n("SelectComp",{staticStyle:{"margin-right":"10px"},attrs:{selected:e.selectSongs.includes(t)},nativeOn:{click:function(n){e.$emit("select",t,e.selectSongs.indexOf(t))}}}),e._v(" "+e._s(e._f("formatSongName")(t.originName))+" ")],1),n("div",{staticClass:"username text-ellipsis p-r",on:{click:function(n){return e.routerToVisit(t.userInfo.id)}}},[n("span",{staticClass:"name"},[e._v(" "+e._s(t.userInfo.username))]),n("SexComp",{attrs:{sex:t.userInfo.sex}})],1),n("div",{staticClass:"duration text-ellipsis"},[e._v(e._s(e._f("formatTime")(t.duration)))]),n("div",{staticClass:"btn-wrapper"},[n("span",{staticClass:"btn play-btn",on:{click:function(n){return e.playOneSong(t)}}}),n("span",{staticClass:"btn download-btn"}),n("span",{staticClass:"btn star-btn",attrs:{title:"收藏歌曲"},on:{click:function(n){return e.collectSong(t.id)}}})])])})),n("AddFavoriteComp",{directives:[{name:"show",rawName:"v-show",value:e.showMask,expression:"showMask"}],attrs:{confirmLoading:e.confirmLoading,favoriteItem:e.favoriteContext,activeIndex:e.activeIndex},on:{addFavorite:e.addFavorite,select:e.select,maskClick:function(t){e.showMask=!1},confirm:e.favoriteConfirm}})],2)},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"search-item header"},[n("div",[e._v("歌曲名")]),n("div",[e._v("上传者")]),n("div",[e._v("时长")])])}],g=n("2909"),v=(n("d81d"),n("5bf8")),b=n("cb81"),y=n("0a0c"),w=n("eb4d"),x=n("cadb"),C=n("03fb"),k=[],S=[],_={components:{SexComp:v["a"],SelectComp:b["a"],AddFavoriteComp:y["a"]},data:function(){return{showMask:!1,confirmLoading:!1,favoriteContext:[],activeIndex:[]}},created:function(){this.getFavoriteContext()},props:{searchSongs:{type:Array,default:function(){return[]}},selectSongs:{type:Array,default:function(){return[]}}},filters:{formatSongName:w["c"],formatTime:x["b"]},methods:{addFavorite:function(e,t){this.activeIndex.push(t),this.favoriteContext.push(e),k.push(e)},getFavoriteContext:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getUserAllFavoriteContext();case 2:n=t.sent,200===n.code&&(e.favoriteContext=n.data);case 4:case"end":return t.stop()}}),t)})))()},select:function(e,t){var n=this.activeIndex.indexOf(t);n>=0?(this.activeIndex.splice(n,1),k.splice(n,1)):(this.activeIndex.push(t),k.push(e))},collectSong:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showMask=!0,n.next=3,t.$api.getSongStatusInFavorite({songId:e});case 3:a=n.sent,r=e,200===a.code&&(t.activeIndex=a.data.map((function(e){return e.FavoriteId})),S=Object(g["a"])(t.activeIndex));case 6:case"end":return n.stop()}}),n)})))()},favoriteConfirm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.confirmLoading=!0,n=Object(C["a"])(S,e.activeIndex),t.next=4,e.$api.confirmFavorite({config:n,songId:r});case 4:a=t.sent,200===a.code&&(S=Object(g["a"])(e.activeIndex)),e.confirmLoading=!1,e.$message({message:"添加收藏夹成功",duration:1500,type:"success"});case 8:case"end":return t.stop()}}),t)})))()},playOneSong:function(e){this.$store.commit("Song/setSongList",[e]),this.$store.commit("Song/setPlayingIndex",0),this.$router.push("/song/any")},routerToVisit:function(e){this.$router.push("/visit/".concat(e))}}},$=_,I=(n("0858"),Object(d["a"])($,h,m,!1,null,"fc045f20",null)),F=I.exports,O=n("43a0"),j={components:{SearchHeader:p,SearchList:F,PagerComp:O["a"]},data:function(){return{searchKeyWord:"",count:0,searchSongs:[],pageConfig:{page:1,size:27},lastKeyWord:"",loading:!1,selectSongs:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:document.title="歌曲搜索",n=e.$route.query,n.keyword&&(e.searchKeyWord=n.keyword,e.lastKeyWord=n.keyword,e.getSearchSong(n));case 3:case"end":return t.stop()}}),t)})))()},methods:{getSearchSong:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.$api.searchByKeyWord({keyword:e?e.keyword:t.searchKeyWord,page:t.pageConfig.page,size:t.pageConfig.size});case 3:r=n.sent,t.searchSongs=r.data.rows,t.count=r.data.count,t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()},select:function(e,t){t>=0?this.selectSongs.splice(t,1):this.selectSongs.push(e)},handleCurrentChange:function(e){document.documentElement.scrollTop=0,this.pageConfig.page=e,this.getSearchSong()},changeSearchKeyword:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$data.lastKeyWord!==e.$data.searchKeyWord){t.next=2;break}return t.abrupt("return");case 2:e.$data.lastKeyWord=e.$data.searchKeyWord,e.getSearchSong();case 4:case"end":return t.stop()}}),t)})))()},playAll:function(){0!==this.searchSongs.length?(this.$store.commit("Song/setSongList",this.searchSongs),this.$store.commit("Song/setPlayingIndex",0),this.$router.push("/song/youwo")):this.$message({message:"歌单里好像没有歌曲哦",type:"warning",duration:1500})},playSelect:function(){0!==this.selectSongs.length?(this.$store.commit("Song/setSongList",this.selectSongs),this.$store.commit("Song/setPlayingIndex",0),this.$router.push("/song/youwo")):this.$message({message:"歌单里好像没有歌曲哦",type:"warning",duration:1500})}}},E=j,A=(n("ce92"),Object(d["a"])(E,a,i,!1,null,"10b87600",null));t["default"]=A.exports},8476:function(e,t,n){"use strict";n("f50d")},9783:function(e,t,n){"use strict";n("4118")},"9bd2":function(e,t,n){"use strict";n("741a")},ab13:function(e,t,n){var r=n("b622"),a=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(r){}}return!1}},addb:function(e,t){var n=Math.floor,r=function(e,t){var s=e.length,o=n(s/2);return s<8?a(e,t):i(r(e.slice(0,o),t),r(e.slice(o),t),t)},a=function(e,t){var n,r,a=e.length,i=1;while(i<a){r=i,n=e[i];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},i=function(e,t,n){var r=e.length,a=t.length,i=0,s=0,o=[];while(i<r||s<a)i<r&&s<a?o.push(n(e[i],t[s])<=0?e[i++]:t[s++]):o.push(i<r?e[i++]:t[s++]);return o};e.exports=r},caad:function(e,t,n){"use strict";var r=n("23e7"),a=n("4d64").includes,i=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},cb81:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"select-wrapper",class:{selected:e.selected},on:{click:function(t){return e.$emit("click",e.selected)}}})},a=[],i={props:{selected:{type:Boolean,default:!1}}},s=i,o=(n("3ca8"),n("2877")),c=Object(o["a"])(s,r,a,!1,null,"b0192d4e",null);t["a"]=c.exports},ce92:function(e,t,n){"use strict";n("417c")},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},f50d:function(e,t,n){}}]);
//# sourceMappingURL=chunk-d5b0cacc.d522aa7f.js.map