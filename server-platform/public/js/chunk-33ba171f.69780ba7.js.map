{"version":3,"sources":["webpack:///./src/views/Song/index.vue?e711","webpack:///./src/components/PlayerBar/index.vue?9add","webpack:///./src/components/PlayerBar/SongListComp/index.vue?7517","webpack:///./src/components/PlayerBar/SongListComp/SongItem/index.vue?631f","webpack:///src/components/PlayerBar/SongListComp/SongItem/index.vue","webpack:///./src/components/PlayerBar/SongListComp/SongItem/index.vue?33e1","webpack:///./src/components/PlayerBar/SongListComp/SongItem/index.vue","webpack:///src/components/PlayerBar/SongListComp/index.vue","webpack:///./src/components/PlayerBar/SongListComp/index.vue?5542","webpack:///./src/components/PlayerBar/SongListComp/index.vue","webpack:///./src/utils/dom.js","webpack:///src/components/PlayerBar/index.vue","webpack:///./src/components/PlayerBar/index.vue?7fdc","webpack:///./src/components/PlayerBar/index.vue","webpack:///./src/components/Lyric/index.vue?2415","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/utils/lyric.js","webpack:///./src/components/Lyric/SongAnimation/index.vue?c2c2","webpack:///src/views/Song/index.vue","webpack:///src/components/Lyric/SongAnimation/index.vue","webpack:///./src/components/Lyric/SongAnimation/index.vue?7bca","webpack:///./src/components/Lyric/SongAnimation/index.vue","webpack:///src/components/Lyric/index.vue","webpack:///./src/components/Lyric/index.vue?6034","webpack:///./src/components/Lyric/index.vue","webpack:///./src/views/Song/index.vue?d199","webpack:///./src/views/Song/index.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./src/utils/player.js","webpack:///./src/components/PlayerBar/index.vue?ed0e","webpack:///./src/components/Lyric/SongAnimation/index.vue?d4f4","webpack:///./src/components/VolumeBar/index.vue?cb70","webpack:///./src/components/Lyric/index.vue?8ace","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./src/assets/gif/animation.gif","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/components/MyTeleport/index.vue?f50d","webpack:///src/components/MyTeleport/index.vue","webpack:///./src/components/MyTeleport/index.vue?1bcb","webpack:///./src/components/MyTeleport/index.vue","webpack:///./src/components/PlayerBar/SongListComp/SongItem/index.vue?db44","webpack:///./src/views/Song/index.vue?2b83","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js","webpack:///./src/components/PlayerBar/SongListComp/index.vue?0411","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./src/components/VolumeBar/index.vue?00a8","webpack:///src/components/VolumeBar/index.vue","webpack:///./src/components/VolumeBar/index.vue?d9c7","webpack:///./src/components/VolumeBar/index.vue?3694","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","style","height","songContainerHeight","attrs","handled","songItem","lyricArr","currentTime","undefined","id","on","getHeight","_e","staticRenderFns","handleDragMove","$event","$store","commit","class","audio","status","handlePlay","songImgSrc","_f","originName","_v","_s","totalTime","width","processWidth","left","handleDragDown","handleVolume","showSongList","showSongListPosition","top","songList","refreshAudio","show","length","$emit","_l","item","i","key","dragTop","handleDragStart","active","playingIndex","index","changeSong","duration","deleteSong","props","Object","Number","computed","filters","formatTime","methods","component","components","SongItem","Boolean","Array","data","isDrag","mounted","document","addEventListener","handleMouseUp","removeEventListener","handleClose","done","mouseStartY","e","clientY","dragStartTop","newTop","$refs","songContainer","scrollTop","beforeDestroy","container","remove","getDOMOffsetTopByDocumentTop","dom","offsetTop","parent","clientTop","offsetParent","timer","isDragInValidRegion","VolumeBar","SongListComp","MyTeleport","barWidth","bgBar","offsetWidth","created","lyric","window","playBarAudio","audioDOM","$nextTick","setSongListPosition","processAnimate","that","frameId","requestAnimationFrame","clearInterval","pause","cancelAnimationFrame","play","setInterval","lastStatus","lastX","clientX","startWidth","curWidth","setVolume","volume","offsetLeft","renderPlayerTime","formatSongName","watch","val","handleScrollEnd","handleScrollMove","routerToHome","userInfo","username","providerUserInfo","directives","name","rawName","value","expression","handleScrollStart","refInFor","activeIndex","word","bg","_arrayWithHoles","arr","isArray","_iterableToArrayLimit","_i","Symbol","iterator","_arr","_n","_d","call","next","push","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","findLyricIndex","time","parseTimeToSecond","split","m","s","ms","parseFloat","backgroundImage","String","SongAnimation","type","default","showPosition","required","barHeight","wrapperHeight","isScroll","handleRefreshProvider","contentHeight","scrollHeight","lyricContent","maxTop","handleMounted","setBg","scrollbar","transition","scrollBehavior","startTop","lastScrollTop","lyricProviderId","$api","getProviderUserInfo","curTop","$router","path","console","log","diffTop","isUpdateSong","PlayerBar","Lyric","getCurrentTime","handleLyric","map","strs","substring","_classCallCheck","instance","Constructor","_defineProperties","target","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","prototype","AudioPlayer","url","createElement","src","load","toFixed","resetCurTime","valueOf","module","exports","_defineProperty","obj","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_t","$","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","stat","forced","it","toInteger","thisNumberValue","repeat","nativeToFixed","floor","Math","pow","x","n","acc","x2","multiply","c","c2","divide","dataToString","t","FORCED","proto","fractionDigits","z","j","k","number","fractDigits","sign","result","RangeError","slice","DESCRIPTORS","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","sham","O","f","bottom","initHeight","handleFunc","getComputedStyle","volumeBar","startHeight","lastY","curHeight","nativeGetOwnPropertyDescriptor"],"mappings":"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","file":"js/chunk-33ba171f.69780ba7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.songItem)?_c('div',{ref:\"songContainer\",staticClass:\"song-container\",style:({\n    height: _vm.songContainerHeight + 'px',\n  })},[_c('div',{staticClass:\"mark\"}),_c('div',{staticClass:\"lyric-region\"},[_c('div',{staticClass:\"lyric-wrapper\"},[_c('Lyric',{attrs:{\"handled\":_vm.handled,\"songItem\":_vm.songItem,\"lyricArr\":_vm.lyricArr,\"currentTime\":_vm.currentTime}})],1)]),(_vm.songItem.id !== undefined)?_c('PlayerBar',{attrs:{\"songItem\":_vm.songItem},on:{\"eventGetHeight\":_vm.getHeight}}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"player-bar-container\",on:{\"mousemove\":_vm.handleDragMove}},[_c('div',{staticClass:\"player-bar-content\"},[_c('div',{staticClass:\"player-control\"},[_c('span',{staticClass:\"player-control-prev player-control-btn\",on:{\"click\":function($event){return _vm.$store.commit('Song/prevSong')}}}),_c('span',{staticClass:\"player-control-btn\",class:{\n          'player-control-pause': _vm.audio.status === 'play',\n          'player-control-play':\n            _vm.audio.status === 'pause' || _vm.audio.status === undefined,\n        },on:{\"click\":_vm.handlePlay}}),_c('span',{staticClass:\"player-control-next player-control-btn\",on:{\"click\":function($event){return _vm.$store.commit('Song/nextSong')}}})]),_c('div',{staticClass:\"song-img-wrapper\"},[_c('img',{attrs:{\"src\":_vm.songImgSrc,\"alt\":\"\"}})]),_c('div',{staticClass:\"player-process\"},[_c('div',{staticClass:\"player-info-wrapper\"},[_c('h2',{staticClass:\"text-ellipsis\",attrs:{\"title\":_vm._f(\"formatSongName\")(_vm.songItem.originName)}},[_vm._v(\" \"+_vm._s(_vm._f(\"formatSongName\")(_vm.songItem.originName))+\" \")]),_c('div',{staticClass:\"player-time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"renderPlayerTime\")(_vm.currentTime))+\" / \"+_vm._s(_vm._f(\"renderPlayerTime\")(_vm.audio.totalTime))+\" \")])]),_c('div',{ref:\"bgBar\",staticClass:\"player-process-bg-bar\"},[_c('div',{staticClass:\"player-process-inner-bar\",style:({\n            width: _vm.processWidth + 'px',\n          })}),_c('span',{staticClass:\"circle\",style:({\n            left: _vm.processWidth + 'px',\n          }),on:{\"mousedown\":_vm.handleDragDown}})])]),_c('div',{staticClass:\"player-ico\"},[_c('span',{staticClass:\"player-volumn\"},[_c('VolumeBar',{attrs:{\"initHeight\":0.5},on:{\"volumePercentage\":_vm.handleVolume}})],1),_c('span',{ref:\"playListBtn\",staticClass:\"player-list music-iconfont icon-24gl-playlistMusic2\",on:{\"click\":function($event){_vm.showSongList = !_vm.showSongList}}})])]),_c('MyTeleport',[_c('SongListComp',{style:({\n        left: _vm.showSongListPosition.left + 'px',\n        top: _vm.showSongListPosition.top - 5 + 'px',\n      }),attrs:{\"songList\":_vm.songList,\"showSongList\":_vm.showSongList},on:{\"change\":_vm.refreshAudio,\"close\":function($event){_vm.showSongList = $event}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"song-list-container p-r\",class:{\n    show: _vm.showSongList,\n  }},[_c('div',{staticClass:\"header\"},[_c('span',[_vm._v(\"播放列表/\"+_vm._s(_vm.songList.length))]),_c('span',{staticClass:\"close el-icon-close\",on:{\"click\":function($event){return _vm.$emit('close', false)}}})]),_c('div',{ref:\"songContainer\",staticClass:\"content\"},_vm._l((_vm.songList),function(item,i){return _c('SongItem',{key:item.id,attrs:{\"songItem\":item,\"index\":i}})}),1),_c('div',{staticClass:\"scroll-bar-container\"},[_c('div',{ref:\"scrollBar\",staticClass:\"scroll-bar\",style:({\n        top: _vm.dragTop + 'px',\n      }),on:{\"mousedown\":_vm.handleDragStart}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-item-wrapper\",class:{\n    active: _vm.playingIndex === _vm.index,\n  },on:{\"click\":_vm.changeSong}},[_c('span',[_vm._v(_vm._s(_vm.index + 1))]),_c('span',{staticClass:\"song-name text-ellipsis\"},[_vm._v(_vm._s(_vm.songItem.originName))]),_c('span',{staticClass:\"song-time\"},[_vm._v(_vm._s(_vm._f(\"formatTime\")(_vm.songItem.duration)))]),_c('span',{staticClass:\"song-ico\"},[(_vm.playingIndex === _vm.index)?_c('i',{staticClass:\"color-cyan\"},[_vm._v(\"正在播放\")]):_c('i',{ref:\"deleteRef\",staticClass:\"el-icon-delete\",on:{\"click\":_vm.deleteSong}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    @click=\"changeSong\"\r\n    class=\"song-item-wrapper\"\r\n    :class=\"{\r\n      active: playingIndex === index,\r\n    }\"\r\n  >\r\n    <span>{{ index + 1 }}</span>\r\n    <span class=\"song-name text-ellipsis\">{{ songItem.originName }}</span>\r\n    <span class=\"song-time\">{{ songItem.duration | formatTime }}</span>\r\n    <span class=\"song-ico\">\r\n        <i v-if=\"playingIndex === index\" class=\"color-cyan\">正在播放</i>\r\n        <i ref=\"deleteRef\" @click=\"deleteSong\" v-else class=\"el-icon-delete\"></i>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { formatTime } from \"@/utils/time\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  props: {\r\n    songItem: Object,\r\n    index: Number,\r\n  },\r\n  computed: {\r\n    ...mapState(\"Song\", [\"playingIndex\"]),\r\n  },\r\n  filters: {\r\n    formatTime,\r\n  },\r\n  methods : {\r\n      changeSong(e) {\r\n          if(e.target === this.$refs.deleteRef || this.playingIndex === this.index) {\r\n              return ;\r\n          }\r\n          this.$store.commit(\"Song/setPlayingIndex\",this.index);\r\n      },\r\n      deleteSong(){\r\n        this.$store.commit(\"Song/cancelSong\",this.index);\r\n      }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/styles/myStyle.less\";\r\n.song-item-wrapper {\r\n  height: 39px;\r\n  line-height: 39px;\r\n  border-bottom: 1px solid #42484e;\r\n  font-size: 14px;\r\n  color: #77777e;\r\n  cursor: pointer;\r\n  position: relative;\r\n  \r\n  span:nth-of-type(1) {\r\n    display: inline-block;\r\n    width: 27px;\r\n    text-align: center;\r\n  }\r\n  .song-name {\r\n    display: inline-block;\r\n    color: #d3d3d3;\r\n    width: 180px;\r\n    vertical-align: middle;\r\n  }\r\n  .song-time {\r\n    float: right;\r\n    width: 60px;\r\n  }\r\n  .song-ico {\r\n      position: absolute;\r\n      text-align: center;\r\n      opacity: 0;\r\n      right :   88px;\r\n      transition: opacity,color .2s;\r\n      &:hover {\r\n          color : @cyan;\r\n      }\r\n  }\r\n  &:hover {\r\n    background: lighten(#40444b, 5%);\r\n    .song-ico {\r\n        opacity: 1;\r\n    }\r\n  }\r\n  &.active {\r\n    background: #40444b;\r\n  }\r\n  \r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4054467d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4054467d&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4054467d\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div\r\n    class=\"song-list-container p-r\"\r\n    ref=\"container\"\r\n    :class=\"{\r\n      show: showSongList,\r\n    }\"\r\n  >\r\n    <div class=\"header\">\r\n      <span>播放列表/{{ songList.length }}</span>\r\n      <span @click=\"$emit('close', false)\" class=\"close el-icon-close\"></span>\r\n    </div>\r\n    <div ref=\"songContainer\" class=\"content\">\r\n      <SongItem\r\n        v-for=\"(item, i) in songList\"\r\n        :key=\"item.id\"\r\n        :songItem=\"item\"\r\n        :index=\"i\"\r\n      />\r\n    </div>\r\n    <div class=\"scroll-bar-container\">\r\n      <div\r\n        @mousedown=\"handleDragStart\"\r\n        ref=\"scrollBar\"\r\n        class=\"scroll-bar\"\r\n        :style=\"{\r\n          top: dragTop + 'px',\r\n        }\"\r\n      ></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongItem from \"./SongItem\";\r\n\r\nexport default {\r\n  components: {\r\n    SongItem,\r\n  },\r\n  props: {\r\n    showSongList: Boolean,\r\n    songList: Array,\r\n  },\r\n  data() {\r\n    return {\r\n      isDrag: false, // 是否在进行拖拽\r\n      dragTop: 0,\r\n    };\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"mouseup\", this.handleMouseUp);\r\n  },\r\n  methods: {\r\n    handleMouseUp() {\r\n      this.isDrag = false; // 拖拽结束\r\n      document.removeEventListener(\"mousemove\", this.handleDragMove);\r\n    },\r\n    handleClose(done) {\r\n      done();\r\n    },\r\n    handleDragStart(e) {\r\n      // 拖拽移动\r\n      this.mouseStartY = e.clientY; // 开始拖拽时鼠标位置\r\n      this.dragStartTop = this.dragTop; // 去到未拖拽的高度\r\n      this.isDrag = true;\r\n      document.addEventListener(\"mousemove\", this.handleDragMove);\r\n    },\r\n    handleDragMove(e) {\r\n      if (!this.isDrag) {\r\n        // 不是拖拽\r\n        return;\r\n      }\r\n      const diff = e.clientY - this.mouseStartY;\r\n      let newTop = this.dragStartTop + diff;\r\n      if (newTop < 0) {\r\n        newTop = 0;\r\n      }\r\n      newTop = newTop > 294 ? 294 : newTop; // 360 - 66\r\n      this.dragTop = newTop;\r\n\r\n      // scrollTop / scrollHeight = newTop / 360\r\n\r\n      this.$refs.songContainer.scrollTop =\r\n        (newTop * this.$refs.songContainer.scrollHeight) / 360;\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.$refs.container.remove();\r\n    document.removeEventListener(\"mouseup\", this.handleMouseUp);\r\n    document.removeEventListener(\"mousemove\", this.handleDragMove);\r\n  },\r\n  \r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/styles/myStyle.less\";\r\n.song-list-container {\r\n  width: 400px;\r\n\r\n  background: #2f343b;\r\n  position: fixed;\r\n  transform: translateY(-105%) rotateX(90deg);\r\n  transition: transform 0.5s;\r\n  transform-origin: center bottom;\r\n  z-index: 1025;\r\n  color: #fff;\r\n  &.show {\r\n    transform: translateY(-105%) rotateX(0deg);\r\n  }\r\n  .header {\r\n    position: relative;\r\n    height: 50px;\r\n    padding: 0 19px;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    background: #2a2e35;\r\n    font-size: 16px;\r\n    line-height: 50px;\r\n    overflow: hidden;\r\n    color: #86898e;\r\n    span:nth-of-type {\r\n      float: left;\r\n    }\r\n    .close {\r\n      float: right;\r\n      height: 50px;\r\n      line-height: 50px;\r\n      cursor: pointer;\r\n      transition: color 0.3s;\r\n      &:hover {\r\n        color: @cyan;\r\n      }\r\n    }\r\n  }\r\n  .content {\r\n    height: 360px;\r\n    overflow-y: hidden;\r\n    overflow-x: hidden;\r\n    padding: 0 19px;\r\n  }\r\n  .scroll-bar-container {\r\n    width: 10px;\r\n    height: 360px;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 50px;\r\n  }\r\n  .scroll-bar {\r\n    height: 66px;\r\n    width: 10px;\r\n    border-radius: 20px;\r\n    background: #fff;\r\n    opacity: 0.2;\r\n    position: absolute;\r\n    right: 0;\r\n    cursor: pointer;\r\n    top: 0;\r\n    &:hover {\r\n      opacity: 0.3;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=31fbd466&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=31fbd466&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31fbd466\",\n  null\n  \n)\n\nexport default component.exports","// 返回DOM元素边框盒外框相对文档最顶部的距离\r\nexport function getDOMOffsetTopByDocumentTop(dom) {\r\n    let offsetTop = 0;\r\n    let parent = dom;\r\n    while (parent) {\r\n        if(parent !== dom) {\r\n            offsetTop += parent.clientTop; // 加上边框\r\n        }\r\n        offsetTop += parent.offsetTop;\r\n        parent = parent.offsetParent;\r\n    }\r\n    return offsetTop;\r\n}\r\n// 返回DOM元素边框盒外框相对文档最左边的距离\r\nexport function getDOMOffsetLeftByDocumentLeft(dom) {\r\n    let offsetLeft = 0;\r\n    let parent = dom;\r\n    while (parent) {\r\n        if(parent !== dom) {\r\n            offsetLeft += parent.clientLeft; // 加上边框\r\n        }\r\n        offsetLeft += parent.offsetLeft;\r\n        parent = parent.offsetParent;\r\n    }\r\n    return offsetLeft;\r\n}","<template>\r\n  <div class=\"player-bar-container\" @mousemove=\"handleDragMove\">\r\n    <div class=\"player-bar-content\">\r\n      <div class=\"player-control\">\r\n        <span\r\n          class=\"player-control-prev player-control-btn\"\r\n          @click=\"$store.commit('Song/prevSong')\"\r\n        ></span>\r\n        <span\r\n          class=\"player-control-btn\"\r\n          @click=\"handlePlay\"\r\n          :class=\"{\r\n            'player-control-pause': audio.status === 'play',\r\n            'player-control-play':\r\n              audio.status === 'pause' || audio.status === undefined,\r\n          }\"\r\n        ></span>\r\n        <!-- class 动态控制 -->\r\n        <span\r\n          class=\"player-control-next player-control-btn\"\r\n          @click=\"$store.commit('Song/nextSong')\"\r\n        ></span>\r\n      </div>\r\n      <div class=\"song-img-wrapper\">\r\n        <img :src=\"songImgSrc\" alt=\"\" />\r\n      </div>\r\n      <div class=\"player-process\">\r\n        <div class=\"player-info-wrapper\">\r\n          <h2\r\n            class=\"text-ellipsis\"\r\n            :title=\"songItem.originName | formatSongName\"\r\n          >\r\n            {{ songItem.originName | formatSongName }}\r\n          </h2>\r\n          <div class=\"player-time\">\r\n            {{ currentTime | renderPlayerTime }} /\r\n            {{ audio.totalTime | renderPlayerTime }}\r\n          </div>\r\n        </div>\r\n        <div class=\"player-process-bg-bar\" ref=\"bgBar\">\r\n          <div\r\n            class=\"player-process-inner-bar\"\r\n            :style=\"{\r\n              width: processWidth + 'px',\r\n            }\"\r\n          ></div>\r\n          <span\r\n            class=\"circle\"\r\n            @mousedown=\"handleDragDown\"\r\n            :style=\"{\r\n              left: processWidth + 'px',\r\n            }\"\r\n          ></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"player-ico\">\r\n        <span class=\"player-volumn\">\r\n          <VolumeBar :initHeight=\"0.5\" @volumePercentage=\"handleVolume\" />\r\n        </span>\r\n        <span\r\n          ref=\"playListBtn\"\r\n          @click=\"showSongList = !showSongList\"\r\n          class=\"player-list music-iconfont icon-24gl-playlistMusic2\"\r\n        >\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 歌曲队列 -->\r\n    <MyTeleport>\r\n      <SongListComp\r\n        @change=\"refreshAudio\"\r\n        :songList=\"songList\"\r\n        :style=\"{\r\n          left: showSongListPosition.left + 'px',\r\n          top: showSongListPosition.top - 5 + 'px',\r\n        }\"\r\n        @close=\"showSongList = $event\"\r\n        :showSongList=\"showSongList\"\r\n      />\r\n    </MyTeleport>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport AudioPlayer from \"../../utils/player\";\r\nimport { formatTime } from \"../../utils/time\";\r\nimport VolumeBar from \"@/components/VolumeBar\";\r\nimport SongListComp from \"./SongListComp\";\r\nimport { getDOMOffsetTopByDocumentTop } from \"@/utils/dom\";\r\nimport { formatSongName } from \"@/utils/song\";\r\nimport MyTeleport from \"../MyTeleport\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      audio: {},\r\n      currentTime: 0,\r\n      timer: null,\r\n      processWidth: 0, //进度条的长度\r\n      isDragInValidRegion: false, // 是否在有效的区域内进行拖拽\r\n      showSongList: false,\r\n      showSongListPosition: {\r\n        left: 0,\r\n        top: 0,\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    VolumeBar,\r\n    SongListComp,\r\n    MyTeleport,\r\n  },\r\n  computed: {\r\n    ...mapState(\"Song\", [\"songImgSrc\", \"songList\"]),\r\n    ...mapGetters(\"Song\", [\"songItem\"]),\r\n    barWidth() {\r\n      return this.$refs.bgBar.offsetWidth; // 为了严谨性，还是获取真的DOM的尺寸\r\n    },\r\n  },\r\n  created() {\r\n    this.audio = new AudioPlayer(\r\n      this.songItem.url,\r\n      0.5,\r\n      this.songItem.duration\r\n    );\r\n    if (this.songItem.lyric !== null && this.songItem.lyric !== \"\") {\r\n      window.playBarAudio = this.audio;\r\n    }\r\n\r\n    this.handleMouseUp = () => {\r\n      // 进行优化处理 组件销毁时移除事件\r\n      if (this.isDragInValidRegion) {\r\n        // 做优化 不然会跟音量调节发生冲突\r\n        this.isDragInValidRegion = false;\r\n        this.audio.goToTime(\r\n          (this.processWidth / this.barWidth) * this.audio.totalTime\r\n        );\r\n        this.currentTime = this.audio.audioDOM.currentTime;\r\n        if (this.lastStatus) {\r\n          // 上一个状态是播放\r\n          // 恢复歌曲状态\r\n          this.handlePlay();\r\n        }\r\n      }\r\n    };\r\n    document.addEventListener(\"mouseup\", this.handleMouseUp);\r\n\r\n    this.audio.audioDOM.addEventListener(\"ended\", () => {\r\n      // 歌曲播放完成\r\n      this.$store.commit(\"Song/nextSong\");\r\n    });\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      // 保证子组件渲染完\r\n      this.$emit(\"eventGetHeight\");\r\n    });\r\n    this.setSongListPosition();\r\n    window.addEventListener(\"resize\", this.setSongListPosition);\r\n  },\r\n  methods: {\r\n    handlePlay() {\r\n      const that = this;\r\n      // 进度条动画效果\r\n\r\n      if (this.processAnimate === undefined) {\r\n        this.processAnimate = () => {\r\n          that.processWidth =\r\n            (that.currentTime / that.audio.totalTime) * that.barWidth;\r\n          that.frameId = requestAnimationFrame(that.processAnimate);\r\n        };\r\n      }\r\n\r\n      if (this.audio.status === \"play\") {\r\n        clearInterval(this.timer);\r\n        this.audio.pause();\r\n        cancelAnimationFrame(that.frameId);\r\n      } else {\r\n        this.audio.play();\r\n        this.timer = setInterval(() => {\r\n          this.currentTime =\r\n            this.audio.audioDOM && this.audio.audioDOM.currentTime;\r\n        }, 1000);\r\n        typeof this.processAnimate === \"function\" && this.processAnimate(); // 进度条动画\r\n      }\r\n    },\r\n    handleDragDown(e) {\r\n      this.isDragInValidRegion = true; // 开始拖拽\r\n      this.lastStatus = this.audio.status === \"play\" ? \"play\" : undefined; // 记录歌曲播放的状态 当鼠标抬起时 恢复状态\r\n      if (this.audio.status === \"play\") {\r\n        this.handlePlay(); // 手动停止歌曲播放\r\n      }\r\n      this.lastX = e.clientX; // 这么写相当于就是往组件实例添加一个普通的属性\r\n      this.startWidth = this.processWidth; //记录最开始进度条的位置\r\n    },\r\n    handleDragMove(e) {\r\n      if (this.isDragInValidRegion === false) {\r\n        // 不是在进行拖拽\r\n        return;\r\n      }\r\n\r\n      // 这里的拖拽思想，以一个比较标准的媒介 视口 clientX\r\n      // 记录鼠标每次事件触发前后的移动距离计算出当前的processWidth\r\n      const moveX = e.clientX - this.lastX;\r\n      // 保证边界\r\n      let curWidth = this.startWidth + moveX;\r\n      if (curWidth < 0) {\r\n        curWidth = 0;\r\n      }\r\n      if (curWidth > this.barWidth) {\r\n        curWidth = this.barWidth;\r\n      }\r\n      // 反映到真实的DOM以及audio对象\r\n      this.processWidth = curWidth;\r\n    },\r\n    handleVolume(volume) {\r\n      this.audio.setVolume(volume);\r\n    },\r\n    setSongListPosition() {\r\n      const dom = this.$refs.playListBtn;\r\n\r\n      this.showSongListPosition.top =\r\n        getDOMOffsetTopByDocumentTop(dom) - dom.offsetTop;\r\n      this.showSongListPosition.left = dom.offsetLeft;\r\n    },\r\n    refreshAudio() {\r\n      this.audio.changeSong &&\r\n        this.audio.changeSong(this.songItem.url, this.songItem.duration);\r\n    },\r\n  },\r\n  filters: {\r\n    // 过滤器\r\n    renderPlayerTime(time) {\r\n      return formatTime(time);\r\n    },\r\n    formatSongName,\r\n  },\r\n  beforeDestroy() {\r\n    // 组件销毁时清除一些副作用\r\n    this.audio.pause();\r\n    this.audio = null;\r\n    window.playBarAudio = null;\r\n    clearInterval(this.timer);\r\n    document.removeEventListener(\"mouseup\", this.handleMouseUp);\r\n    window.removeEventListener(\"resize\", this.setSongListPosition);\r\n  },\r\n  watch: {\r\n    currentTime(val) {\r\n      // 监听currentTime 歌词部分需要currentTime\r\n      this.$emit(\"getCurrentTime\", val);\r\n    },\r\n    songItem() {\r\n      if (this.songItem.lyric !== null && this.songItem.lyric !== \"\") {\r\n        window.playBarAudio = this.audio; // 解决因为一开始没有歌词，而组件只在挂载时保存DOM导致的歌词动画出现BUG\r\n      }\r\n      this.refreshAudio();\r\n      this.processWidth = 0; // 重置进度条\r\n      this.currentTime = 0;\r\n      // audio.status 是AudioPlayer类内部控制的\r\n      // 切换歌曲时如果是播放状态\r\n      if (this.audio.status === \"play\") {\r\n        this.handlePlay(); // 让它暂停\r\n      }\r\n      this.handlePlay(); // 暂停后在自动播放\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/styles/myStyle.less\";\r\n@import url(\"./playerIco.less\");\r\n.player-bar-container {\r\n  width: 100%;\r\n  height: 80px;\r\n  position: fixed;\r\n  bottom: 0;\r\n  border-top: 1px solid #333;\r\n  background-color: #32353a;\r\n  .player-bar-content {\r\n    width: 1000px;\r\n    height: 100%;\r\n    margin: 0 auto;\r\n    display: flex;\r\n    align-items: center;\r\n    color: #fff;\r\n  }\r\n  .player-control {\r\n    width: 300px;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    .player-control-btn {\r\n      display: inline-block;\r\n      cursor: pointer;\r\n      background: url(\"../../assets/song.png\") no-repeat;\r\n    }\r\n    .player-control-prev,\r\n    .player-control-next {\r\n      width: 36px;\r\n      height: 36px;\r\n      background-position: 0 -143px;\r\n    }\r\n    .player-control-next {\r\n      &:hover {\r\n        background-position: -180px -143px;\r\n      }\r\n    }\r\n    .player-control-prev {\r\n      &:hover {\r\n        background-position: -36px -143px;\r\n      }\r\n    }\r\n    .player-control-play {\r\n      width: 60px;\r\n      height: 60px;\r\n      &:hover {\r\n        background-position: -60px 0;\r\n      }\r\n    }\r\n    .player-control-pause {\r\n      width: 60px;\r\n      height: 60px;\r\n      background-position: 0 -60px;\r\n      &:hover {\r\n        background-position: -60px -60px;\r\n      }\r\n    }\r\n    .player-control-next {\r\n      background-position: -144px -143px;\r\n    }\r\n  }\r\n  .song-img-wrapper {\r\n    width: 60px;\r\n    height: 60px;\r\n    margin-right: 30px;\r\n    img {\r\n      display: block;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n  .player-process {\r\n    width: 370px;\r\n    height: 100%;\r\n    .player-info-wrapper {\r\n      height: 27px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      line-height: 27px;\r\n      margin-top: 10px;\r\n      h2 {\r\n        font-size: 1rem;\r\n        width: 200px;\r\n        font-weight: normal;\r\n      }\r\n    }\r\n    .player-process-bg-bar {\r\n      margin-top: 15px;\r\n      width: 100%;\r\n      height: 5px;\r\n      border-radius: 5px;\r\n      background-color: #aaa;\r\n      position: relative;\r\n      .player-process-inner-bar {\r\n        position: absolute;\r\n        width: 50%;\r\n        height: 100%;\r\n        background-color: @blue;\r\n        border-radius: 5px;\r\n      }\r\n      span.circle {\r\n        // 为了方便控制，这个还不能是一个伪元素\r\n        display: block;\r\n        width: 15px;\r\n        height: 15px;\r\n        position: absolute;\r\n        left: 50%; /* 通过JS动态控制 */\r\n        background-color: #fff;\r\n        border-radius: 50%;\r\n        cursor: pointer;\r\n        z-index: 100;\r\n        transform: translateY(-40%) translateX(-5px);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b04c3252&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=b04c3252&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b04c3252\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"lyricContainer\",staticClass:\"lyric-container\",on:{\"mouseup\":_vm.handleScrollEnd,\"mousemove\":_vm.handleScrollMove}},[_c('div',{staticClass:\"lyric-header\"},[_c('h2',[_c('span',{staticClass:\"song-name text-ellipsis\",attrs:{\"title\":_vm._f(\"formatSongName\")(_vm.songItem.originName)}},[_vm._v(_vm._s(_vm._f(\"formatSongName\")(_vm.songItem.originName)))]),_c('span',{staticClass:\"mv-ico\"})]),_c('span',{staticClass:\"creative\"},[_c('i',[_vm._v(\"上传者：\")]),_c('span',{on:{\"click\":function($event){return _vm.routerToHome(_vm.songItem.userInfo.id)}}},[_vm._v(_vm._s(_vm.songItem.userInfo.username))])]),_c('span',{staticClass:\"provider\"},[_c('i',[_vm._v(\"歌词提供者：\")]),(_vm.providerUserInfo)?_c('span',{on:{\"click\":function($event){return _vm.routerToHome(_vm.providerUserInfo.id)}}},[_vm._v(_vm._s(_vm.providerUserInfo.username))]):_c('span',[_vm._v(\"没有歌词哦,您愿意为该歌提供歌词吗?\")])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lyricArr.length > 0),expression:\"lyricArr.length > 0\"}],staticClass:\"lyric-mask\",style:({\n      width: _vm.width + 'px',\n    })},[_c('div',{ref:\"scrollbar\",staticClass:\"scrollbar\",style:({\n        top: _vm.top + 'px',\n      }),on:{\"mousedown\":_vm.handleScrollStart}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lyricArr.length > 0),expression:\"lyricArr.length > 0\"}],ref:\"lyricContent\",staticClass:\"lyric-content\",style:({\n      width: _vm.width - 10 + 'px',\n    })},_vm._l((_vm.lyricArr),function(item,index){return _c('p',{key:index,ref:\"domArr\",refInFor:true,class:{\n        active: index === _vm.activeIndex,\n      }},[_vm._v(\" \"+_vm._s(item.word)+\" \")])}),0),(_vm.lyricArr.length === 0)?_c('SongAnimation',{attrs:{\"bg\":_vm.bg}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","// 歌词的工具方法\r\n\r\n/* \r\n我在想要不要把传进来的歌词数据中的时间转成秒数\r\n后来一想，数据这么做也是有道理的\r\n那就用一种不是很精确的做法\r\n截取时间的分秒进行字符串匹配\r\n\r\n例如传进来的是 time \"02:30\" 那么就展示歌词前面几位匹配的\r\n因为不是通过时间去匹配的，所以不是很严格\r\n\r\n还是用秒吧。。。\r\n*/\r\nexport function findLyricIndex(lyricArr, time) {\r\n\r\n\r\n    if (lyricArr[0] && lyricArr[0].time === undefined) {\r\n        return -1; //没有传递歌词时间\r\n    }\r\n    let index = -1;\r\n    // findIndex还不太适合\r\n    for (let i = 0; i < lyricArr.length; i++) {\r\n        if (lyricArr[i].time <= time) {\r\n            // 播放时间大于歌词展示的时间\r\n            index = i;\r\n        }\r\n        if (lyricArr[i].time > time) {\r\n            // 下一句歌词的展示时间还不到播放时间\r\n            break;\r\n        }\r\n    }\r\n\r\n\r\n    return index;\r\n}\r\n\r\n// 传进来一个时间字符串转换成秒\r\nexport function parseTimeToSecond(time) {\r\n    // 允许没有毫秒\r\n    // \"01:30.165\" ---> 60 + 30 + .165\r\n    let [m, s, ms] = time.split(/[:.]/g);\r\n    if (m === undefined || s === undefined) {\r\n        return -1;\r\n    }\r\n    if (ms) {\r\n        ms = parseFloat(0 + \".\" + ms);\r\n    } else {\r\n        ms = 0;\r\n    }\r\n    return m * 60 + (+ s) + ms;\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-animation-bg p-r\"},[_c('div',{staticClass:\"bg\",style:({\n    backgroundImage : (\"url(\" + _vm.bg + \")\")\n  }),attrs:{\"alt\":\"\"}}),_c('img',{staticClass:\"p-a\",attrs:{\"src\":require(\"@/assets/gif/animation.gif\"),\"alt\":\"\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    v-if=\"songItem\"\r\n    class=\"song-container\"\r\n    ref=\"songContainer\"\r\n    :style=\"{\r\n      height: songContainerHeight + 'px',\r\n    }\"\r\n  >\r\n    <!-- 可以通过计算左上角的高度，来动态的设置这个容器的高度 -->\r\n    <div class=\"mark\"></div>\r\n    <div class=\"lyric-region\">\r\n      <div class=\"lyric-wrapper\">\r\n        <Lyric\r\n          :handled=\"handled\"\r\n          :songItem=\"songItem\"\r\n          :lyricArr=\"lyricArr\"\r\n          :currentTime=\"currentTime\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <PlayerBar\r\n      :songItem=\"songItem\"\r\n      @eventGetHeight=\"getHeight\"\r\n      v-if=\"songItem.id !== undefined\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport PlayerBar from \"../../components/PlayerBar\";\r\nimport Lyric from \"../../components/Lyric\";\r\nimport { parseTimeToSecond } from \"../../utils/lyric\";\r\nlet frameId;\r\nexport default {\r\n  data() {\r\n    return {\r\n      isUpdateSong: false, // 是否真实更新了歌曲数据\r\n      // 有个小BUG，本来从播放页离开应该将仓库的歌曲数据清掉，但是并没有\r\n      // 不过这么做也一样，保证了歌曲信息一定是更新的，不过还用着上一条歌的数据\r\n\r\n      songContainerHeight: 0,\r\n      lyricArr: [], // 歌词\r\n      currentTime: 0,\r\n      handled: false, // 歌词是否处理过了\r\n    };\r\n  },\r\n  components: {\r\n    PlayerBar, // 播放器组件\r\n    Lyric, // 歌词组件\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"Song\", [\"songItem\"]),\r\n  },\r\n  async created() {\r\n    document.title = \"歌曲播放\";\r\n    if (this.$route.params.id == \"youwo\") {\r\n      // 如果是youwo，有可能是从主页跳转过来的\r\n      if (!this.$route.query.songList) {\r\n        // 没有歌曲\r\n        return;\r\n      }\r\n      const idArray = JSON.parse(this.$route.query.songList);\r\n\r\n      const { code, data, err } = await this.$api.recoverySong(idArray);\r\n      if (code === 200) {\r\n        this.$store.commit(\"Song/setSongList\", data);\r\n        this.$store.commit(\"Song/setPlayingIndex\", 0);\r\n      } else {\r\n        this.$message({\r\n          message: err,\r\n          duration: 1500,\r\n          type: \"error\",\r\n        });\r\n      }\r\n    }\r\n\r\n    if (this.$route.params.id === \"any\") {\r\n      // 如果是临时歌单\r\n    }\r\n\r\n    if (!this.songItem) {\r\n      // 歌曲为空\r\n      // 发送请求拿到歌单\r\n      // 然后默认播放第一条\r\n      const res = await this.$store.dispatch(\"Song/getSongList\", {\r\n        id: +this.$route.params.id,\r\n      });\r\n      if (res === null) {\r\n        this.$message({\r\n          message: \"获取数据失败\",\r\n          type: \"warning\",\r\n          duration: 1500,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.handleLyric(); // 处理歌词\r\n  },\r\n  mounted() {\r\n    const getCurrentTime = () => {\r\n      if (window.playBarAudio) {\r\n        this.currentTime = window.playBarAudio.audioDOM.currentTime;\r\n      }\r\n      frameId = requestAnimationFrame(getCurrentTime);\r\n    };\r\n    (() => {\r\n      requestAnimationFrame(getCurrentTime);\r\n    })();\r\n  },\r\n  methods: {\r\n    getHeight() {\r\n      this.songContainerHeight =\r\n        document.documentElement.clientHeight - this.$el.offsetTop - 1;\r\n    },\r\n    handleLyric() {\r\n      if (this.songItem.lyric === null || this.songItem.lyric === \"\") {\r\n        this.lyricArr = [];\r\n        this.handled = true;\r\n        return;\r\n      }\r\n      let lyric = this.songItem.lyric; // 获取歌词\r\n\r\n      lyric = lyric.split(/&/).map((item) => {\r\n        // 看有没有歌词时间，有就处理一下\r\n        const index = item.indexOf(\"]\");\r\n        if (index >= 0) {\r\n          const strs = item.split(\"]\");\r\n          return {\r\n            time: parseTimeToSecond(strs[0].substring(1)),\r\n            word: strs[1],\r\n          };\r\n        } else {\r\n          // 只有歌词\r\n          return {\r\n            word: item,\r\n          };\r\n        }\r\n      });\r\n\r\n      this.lyricArr = lyric; // 歌词处理完成\r\n      this.handled = true;\r\n    },\r\n  },\r\n  watch: {\r\n    songItem() {\r\n      this.handled = false;\r\n      this.handleLyric();\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    cancelAnimationFrame(frameId);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.song-container {\r\n  width: 100%;\r\n  min-width: 1140px;\r\n  background-color: #ddd;\r\n  position: relative;\r\n  .mark {\r\n    width: 100%;\r\n    height: 100%;\r\n    min-width: 1140px;\r\n    background: url(\"~@/assets/songBg.jpg\") no-repeat;\r\n    background-position: center;\r\n    background-size: cover;\r\n    position: relative;\r\n    filter: blur(3px);\r\n  }\r\n  .lyric-region {\r\n    width: 100%;\r\n    height: 100%;\r\n    min-width: 1140px;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    .lyric-wrapper {\r\n      width: 50%;\r\n      min-width: 670px;\r\n      height: 100%;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"song-animation-bg p-r\">\r\n    <div class=\"bg\" :style=\"{\r\n      backgroundImage : `url(${bg})`\r\n    }\" alt=\"\" />\r\n    <img class=\"p-a\" src=\"@/assets/gif/animation.gif\" alt=\"\" />\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    bg: String,\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n.song-animation-bg {\r\n  width: 27vw;\r\n  height: 27vw;\r\n  margin: 0 auto;\r\n  // filter: blur(1px);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  transform: translateY(-3%);\r\n  z-index: 10;\r\n  box-shadow: inset 0px 0px 50px #fff, inset 10px 0px 80px #14a9ff,\r\n    inset -10px 0px 80px #0ff, inset 10px 0px 130px #0ff,\r\n    inset -10px 0px 130px #0ff, 0 0 30px #fff, -10px 0px 80px #14a9ff,\r\n    10px 0px 80px #0ff, 20px 0px 180px #0ff, -20px 0px 180px #14a9ff;\r\n\r\n  img {\r\n    left : 50%;\r\n    top : 50%;\r\n    width: 95%;\r\n    height: 95%;\r\n    transform: translate(-50%,-50%);\r\n    border-radius: 50%;\r\n    opacity: 0.5;\r\n    \r\n  }\r\n  .bg {\r\n    opacity: 0.7;\r\n    z-index: 27;\r\n    width: 95%;\r\n    height: 95%;\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n    overflow: hidden;\r\n    transform-origin: center;\r\n    box-shadow: 0 0 50px #fff,inset 0 0 100px #fff;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=11bcb904&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=11bcb904&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11bcb904\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div\r\n    class=\"lyric-container\"\r\n    ref=\"lyricContainer\"\r\n    @mouseup=\"handleScrollEnd\"\r\n    @mousemove=\"handleScrollMove\"\r\n  >\r\n    <div class=\"lyric-header\">\r\n      <h2>\r\n        <span\r\n          :title=\"songItem.originName | formatSongName\"\r\n          class=\"song-name text-ellipsis\"\r\n          >{{ songItem.originName | formatSongName }}</span\r\n        >\r\n        <span class=\"mv-ico\"></span>\r\n      </h2>\r\n      <span class=\"creative\"\r\n        ><i>上传者：</i\r\n        ><span @click=\"routerToHome(songItem.userInfo.id)\">{{\r\n          songItem.userInfo.username\r\n        }}</span></span\r\n      >\r\n      <span class=\"provider\"\r\n        ><i>歌词提供者：</i>\r\n        <span\r\n          v-if=\"providerUserInfo\"\r\n          @click=\"routerToHome(providerUserInfo.id)\"\r\n          >{{ providerUserInfo.username }}</span\r\n        >\r\n        <span v-else>没有歌词哦,您愿意为该歌提供歌词吗?</span>\r\n      </span>\r\n    </div>\r\n    <div\r\n      v-show=\"lyricArr.length > 0\"\r\n      class=\"lyric-mask\"\r\n      :style=\"{\r\n        width: width + 'px',\r\n      }\"\r\n    >\r\n      <div\r\n        class=\"scrollbar\"\r\n        ref=\"scrollbar\"\r\n        @mousedown=\"handleScrollStart\"\r\n        :style=\"{\r\n          top: top + 'px',\r\n        }\"\r\n      ></div>\r\n    </div>\r\n    <div\r\n      class=\"lyric-content\"\r\n      v-show=\"lyricArr.length > 0\"\r\n      ref=\"lyricContent\"\r\n      :style=\"{\r\n        width: width - 10 + 'px',\r\n      }\"\r\n    >\r\n      <p\r\n        v-for=\"(item, index) in lyricArr\"\r\n        :key=\"index\"\r\n        ref=\"domArr\"\r\n        :class=\"{\r\n          active: index === activeIndex,\r\n        }\"\r\n      >\r\n        {{ item.word }}\r\n      </p>\r\n    </div>\r\n\r\n    <SongAnimation :bg=\"bg\" v-if=\"lyricArr.length === 0\" />\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n// 这个组件比较通用后面可以写一个文档\r\nimport { findLyricIndex } from \"../../utils/lyric\";\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport SongAnimation from \"./SongAnimation\";\r\nimport { formatSongName } from \"@/utils/song\";\r\nexport default {\r\n  components: {\r\n    SongAnimation,\r\n  },\r\n  props: {\r\n    // 还要动态的传递一个时间代表歌曲播放到哪了\r\n    // 因为网易云的那个接口没有歌词播放的时间，所以先不做那个歌词配合歌曲播放的效果\r\n    // 等到自己做的上传的时候看看\r\n    handled: Boolean, // 歌词是否处理过了\r\n    lyricArr: {\r\n      type: Array,\r\n      default: () => [],\r\n      // {\r\n      //     word : 歌词\r\n      //     time? : 歌词对应的时间\r\n      // }\r\n    },\r\n    showPosition: {\r\n      // 某句歌词激活应该出现的位置\r\n      type: Number,\r\n      default: 176,\r\n    },\r\n    currentTime: {\r\n      // 歌词当前播放的时间\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  filters: {\r\n    formatSongName,\r\n  },\r\n  data() {\r\n    return {\r\n      barHeight: 0,\r\n      wrapperHeight: 0,\r\n      isScroll: false,\r\n      top: 0,\r\n      width: 0,\r\n      activeIndex: 0,\r\n      providerUserInfo: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.handleRefreshProvider(); // 歌词提供者\r\n  },\r\n  computed: {\r\n    contentHeight() {\r\n      return parseFloat(\r\n        window.getComputedStyle(this.$refs.lyricContent)[\"height\"]\r\n      );\r\n    },\r\n    scrollHeight() {\r\n      return this.$refs.lyricContent.scrollHeight;\r\n    },\r\n    maxTop() {\r\n      return this.contentHeight - this.barHeight;\r\n    },\r\n    ...mapGetters(\"Song\", [\"songItem\"]),\r\n    ...mapState(\"Song\", [\"bg\"]),\r\n  },\r\n  mounted() {\r\n    this.handleMounted();\r\n    if (this.handled === true && this.lyricArr.length === 0) {\r\n      this.setBg();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    handleScrollStart(e) {\r\n      this.isScroll = true;\r\n      this.$refs.scrollbar.style.transition = \"none\"; // 拖拽导致的滚动条效果应该是实时的\r\n      this.$refs.lyricContent.style.scrollBehavior = \"auto\"; // 进行动画和拖拽效果的优化\r\n      this.startTop = this.top;\r\n      this.lastScrollTop = e.clientY;\r\n    },\r\n    handleRefreshProvider() {\r\n      if (this.songItem.lyricProviderId === null) {\r\n        this.providerUserInfo = null;\r\n      }\r\n      if (this.songItem.lyricProviderId === this.songItem.userInfo.id) {\r\n        // 本人上传不需要请求歌词提供者信息\r\n        this.providerUserInfo = this.songItem.userInfo;\r\n      } else if (typeof this.songItem.lyricProviderId === \"number\") {\r\n        // 发送请求到后台询问歌词提供者信息\r\n        this.$api.getProviderUserInfo(this.songItem.lyricProviderId);\r\n      }\r\n    },\r\n    handleScrollMove(e) {\r\n      if (!this.isScroll) {\r\n        return;\r\n      }\r\n      const moveY = e.clientY - this.lastScrollTop;\r\n\r\n      let curTop = this.startTop + moveY;\r\n      //   边界处理\r\n      curTop = curTop < 0 ? 0 : curTop;\r\n      curTop = curTop > this.maxTop ? this.maxTop : curTop;\r\n      this.top = curTop;\r\n      this.$refs.lyricContent.scrollTop =\r\n        (curTop / this.maxTop) * this.scrollHeight; // 设置歌词的滚动距离\r\n    },\r\n    handleScrollEnd() {\r\n      // 控制滚动\r\n      this.isScroll = false;\r\n    },\r\n    routerToHome(id) {\r\n      // 访问个人空间\r\n      this.$router.push({\r\n        path: `/visit/${id}`,\r\n      });\r\n    },\r\n    handleMounted() {\r\n      this.barHeight = parseFloat(\r\n        window.getComputedStyle(this.$refs.scrollbar)[\"height\"]\r\n      );\r\n      this.width =\r\n        parseFloat(\r\n          window.getComputedStyle(this.$refs.lyricContainer)[\"width\"]\r\n        ) - 10; // 处理滚动条事件效果失效\r\n    },\r\n    setBg() {\r\n      this.$store.commit(\"Song/setBg\");\r\n    },\r\n  },\r\n  watch: {\r\n    handled(val) {\r\n      if (val === true && this.lyricArr.length === 0) {\r\n        console.log(\"??\");\r\n        this.setBg();\r\n      }\r\n    },\r\n    currentTime(val) {\r\n      // 当前播放的时间\r\n      if (this.lyricArr.length === 0) {\r\n        return;\r\n      }\r\n      const index = findLyricIndex(this.lyricArr, val); // 找到当前正在播放的歌词\r\n      if (index !== this.activeIndex) {\r\n        this.activeIndex = index;\r\n      }\r\n    },\r\n    activeIndex(index) {\r\n      const dom = this.$refs.domArr[index];\r\n      if (dom.offsetTop <= this.showPosition) { // 处理首屏歌词\r\n        let diffTop = dom.offsetTop - this.showPosition;\r\n        this.$refs.scrollbar.style.transition = `top .5s`; // 播放导致的滚动条效果设置动画\r\n        this.$refs.lyricContent.style.scrollBehavior = \"smooth\"; // 进行动画和拖拽效果的优化\r\n        this.$refs.lyricContent.scrollTop = diffTop;\r\n        this.top = 0;\r\n        return ;\r\n      }\r\n      let diffTop = dom.offsetTop - this.showPosition;\r\n      this.$refs.scrollbar.style.transition = `top .5s`; // 播放导致的滚动条效果设置动画\r\n      this.$refs.lyricContent.style.scrollBehavior = \"smooth\"; // 进行动画和拖拽效果的优化\r\n      this.$refs.lyricContent.scrollTop = diffTop;\r\n      // diffTop = (curTop / this.maxTop) * this.scrollHeight;\r\n      this.top = (diffTop / this.scrollHeight) * this.maxTop; // 设置滚动条的滚动距离\r\n    },\r\n    songItem() {\r\n      this.handleRefreshProvider(); // 实时更新数据\r\n      if (this.lyricArr.length === 0) {\r\n        this.setBg();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.lyric-container {\r\n  font-family: Microsoft YaHei;\r\n  width: 100%;\r\n  height: 100%;\r\n  color: #fff;\r\n  .lyric-mask {\r\n    height: 65%;\r\n    overflow-y: hidden;\r\n    box-sizing: border-box;\r\n    padding-right: 10px;\r\n    position: absolute;\r\n    z-index: 10;\r\n    .scrollbar {\r\n      height: 66px;\r\n      width: 10px;\r\n      border-radius: 20px;\r\n      background: #fff;\r\n      opacity: 0.2;\r\n      position: absolute; // 绝对定位，方便设置滚动条位置\r\n      right: 0; // 设置滚动条在最右边\r\n      cursor: pointer;\r\n      &:hover {\r\n        opacity: 0.3;\r\n      }\r\n    }\r\n  }\r\n  .lyric-header {\r\n    height: 60px;\r\n    margin-bottom: 27px;\r\n    h2 {\r\n      font-size: 21px;\r\n      .song-name {\r\n        max-width: 270px;\r\n        display: inline-block;\r\n        vertical-align: middle;\r\n      }\r\n      .mv-ico {\r\n        background: url(../../assets/song.png) no-repeat;\r\n        display: inline-block;\r\n        width: 25px;\r\n        height: 13px;\r\n        margin: 15px 0 0 10px;\r\n        background-position: 0 -214px;\r\n        cursor: pointer;\r\n        &:hover {\r\n          background-position: -35px -214px;\r\n        }\r\n      }\r\n    }\r\n    & > span {\r\n      font-size: 14px;\r\n      margin-top: 5px;\r\n      cursor: pointer;\r\n      & > span {\r\n        transition: color 0.3s;\r\n        &:hover {\r\n          color: #01e5ff;\r\n        }\r\n      }\r\n      i {\r\n        opacity: 0.8;\r\n      }\r\n    }\r\n    .creative {\r\n      display: inline-block;\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n\r\n  .lyric-content {\r\n    height: 65%;\r\n    scroll-behavior: smooth;\r\n    overflow-y: hidden;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n    padding-right: 10px;\r\n    position: absolute;\r\n    overflow: hidden;\r\n    p {\r\n      transition: all 0.8s;\r\n      height: 34px;\r\n      opacity: 0.6;\r\n    }\r\n    p.active {\r\n      opacity: 1;\r\n      color: #01e5ff;\r\n      transform: scale(1.15);\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ee1dd50a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ee1dd50a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee1dd50a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0360a798&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0360a798&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0360a798\",\n  null\n  \n)\n\nexport default component.exports","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default class AudioPlayer {\r\n    // 音乐播放器\r\n    constructor(url, volume, totalTime) {\r\n        this.url = url;\r\n        this.audioDOM = document.createElement('audio');\r\n        this.audioDOM.src = url;\r\n        this.audioDOM.load(); // 加载歌曲\r\n\r\n        this.status = 'pause';\r\n        this.totalTime = totalTime;\r\n        this.setVolume(volume);\r\n    }\r\n    setTotalTime(time) { // 设置总时间 s\r\n        this.totalTime = time;\r\n    }\r\n    play() {\r\n        this.audioDOM.play();\r\n        this.status = 'play';\r\n    }\r\n    pause() {\r\n        this.audioDOM.pause();\r\n        this.status = 'pause';\r\n    }\r\n    goToTime(time) {\r\n        this.audioDOM.currentTime = time;\r\n    }\r\n    setVolume(volume) { // 设置声音大小\r\n        volume = volume.toFixed(2);\r\n        this.audioDOM.volume = volume;\r\n    }\r\n    resetCurTime() {\r\n        this.audioDOM.currentTime = 0;\r\n    }\r\n    changeSong(url, totalTime) {\r\n        this.resetCurTime();\r\n        this.audioDOM.src = url\r\n        this.audioDOM.load(); // 加载歌曲\r\n        this.totalTime = totalTime;\r\n    }\r\n\r\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=b04c3252&lang=less&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=11bcb904&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=ee1dd50a&lang=less&scoped=true&\"","var valueOf = 1.0.valueOf;\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  return valueOf.call(value);\n};\n","module.exports = __webpack_public_path__ + \"img/animation.2f24d399.gif\";","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"teleport-container\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"teleport-container\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 手写一个vue3的Teleport\r\nexport default {\r\n    props : {\r\n        selector : {\r\n            type : String,\r\n            default : \"body\"\r\n        }\r\n    },\r\n    mounted() {\r\n        if(this.selector === \"body\") {\r\n            // 直接挂载到body\r\n            document.body.appendChild(this.$el);\r\n        } else {\r\n            document.querySelector(this.selector).appendChild(this.$el);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7198f4f3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7198f4f3\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4054467d&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0360a798&lang=less&scoped=true&\"","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=31fbd466&lang=less&scoped=true&\"","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"volume-wrapper\",on:{\"mousemove\":_vm.handleDragMove}},[_c('div',{ref:\"volumeBar\",staticClass:\"volume-bg-bar\"},[_c('div',{staticClass:\"volume-inner-bar\",style:({\n        height: _vm.height + 'px',\n      })}),_c('span',{staticClass:\"volume-circle\",style:({\n        bottom: _vm.height + 'px',\n      }),on:{\"mousedown\":_vm.handleDragStart}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"volume-wrapper\" @mousemove=\"handleDragMove\">\r\n    <div class=\"volume-bg-bar\" ref=\"volumeBar\">\r\n      <div\r\n        class=\"volume-inner-bar\"\r\n        :style=\"{\r\n          height: height + 'px',\r\n        }\"\r\n      ></div>\r\n      <span\r\n        class=\"volume-circle\"\r\n        @mousedown=\"handleDragStart\"\r\n        :style=\"{\r\n          bottom: height + 'px',\r\n        }\"\r\n      ></span>\r\n    </div>\r\n    <!-- 音量调节跟进度条思路一致 -->\r\n    <!-- 有空的话，可以考虑一下提取公共代码 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 做一个比较通用的组件\r\n// 这个组件不仅可以用于调节音量，反正就对外抛出事件volumePercentage，事件回调参数是百分比\r\n// 至于做什么？我管不着，爱咋地咋地。\r\n// 提供事件 volumePercentage(百分比)\r\nexport default {\r\n  props: {\r\n    initHeight: {\r\n      type: Number,\r\n      required: true,\r\n      // 做一下校验\r\n    }, // 要求传进来小数\r\n  },\r\n  data() {\r\n    return {\r\n      height: 0,\r\n    };\r\n  },\r\n  created() {\r\n    this.handleFunc = () => {\r\n      if (this.isDrag) {\r\n        this.isDrag = false;\r\n      }\r\n    };\r\n    document.addEventListener(\"mouseup\", this.handleFunc);\r\n  },\r\n  mounted() {\r\n    // this.barHeight = this.$refs.volumeBar.offsetHeight; // 获取的高度为0？\r\n\r\n    // 我以为是获取时机的问题，所以我把对象保存到window,但结果几乎所有位置和高度宽度的属性值都为0\r\n\r\n    this.barHeight = parseFloat(window.getComputedStyle(this.$refs.volumeBar,null)['height']);\r\n    this.height = this.initHeight * this.barHeight; // 初始化数据\r\n  },\r\n  methods: {\r\n    handleDragStart(e) {\r\n      this.isDrag = true; // 普通属性，用于区分是否在进行拖拽\r\n\r\n      this.startHeight = this.height;\r\n      this.lastY = e.clientY;\r\n    },\r\n    handleDragMove(e) {\r\n      if (!this.isDrag) {\r\n        // 没有进行拖拽\r\n        return;\r\n      }\r\n      const moveY = -(e.clientY - this.lastY);\r\n      let curHeight = this.startHeight + moveY;\r\n      // 进行边界处理\r\n      curHeight = curHeight < 0 ? 0 : curHeight;\r\n      curHeight = curHeight > this.barHeight ? this.barHeight : curHeight;\r\n\r\n      // 反映到真实DOM\r\n      this.height = curHeight;\r\n\r\n      // 抛出事件\r\n      this.$emit(\"volumePercentage\", curHeight / this.barHeight);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    document.removeEventListener(\"mouseup\", this.handleFunc);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"~@/styles/myStyle.less\";\r\n.volume-wrapper {\r\n  width: 29px;\r\n  height: 114px;\r\n  position: absolute;\r\n  z-index: 100;\r\n  background: url(\"../../assets/volume-panel.png\") no-repeat;\r\n  .volume-bg-bar {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    left: 12px;\r\n    top: 11px;\r\n    width: 5px;\r\n    height: 90px;\r\n    .volume-inner-bar {\r\n      position: absolute;\r\n      bottom: 0;\r\n      left: 0;\r\n      width: 5px;\r\n      height: 50%;\r\n      background: @blue;\r\n    }\r\n    .volume-circle {\r\n      // 跟音乐进度条一样 最好不要用伪元素\r\n      position: absolute;\r\n      left: 0;\r\n      // top: calc(100% - 50%);\r\n      // 动态操控\r\n      transform: translateX(-32%) translateY(50%);\r\n      width: 12px;\r\n      height: 12px;\r\n      background: #fff;\r\n      border-radius: 50%;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=91e03a70&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n"],"sourceRoot":""}